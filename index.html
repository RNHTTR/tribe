<!-- TODO
  Handle empty values for category, item name
  Category is gray even after selection
  Submit button should be greyed out until an item is added
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>tribe</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<!-- TODO! Handle what happens when user is in the red, i.e. did not meet savings goals! -->
<body>
  <div class="navbar">
    <nav class="teal lighten-2" role="navigation">
      <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo"><b class="lime-text text-accent-1">t</b>ri<b class="lime-text text-accent-1">b</b>e</a>
        <ul class="right hide-on-med-and-down">
          <li><a href="https://www.gofundme.com">DONATE <i class="material-icons right">launch</i></a></li>
          <li><a class="btn lime accent-1 black-text" href="#gift-cards">Buy a Gift Card</a></li>
          <li><a class="btn white accent-1 black-text modal-trigger" href="#application-modal">Relief Application</a></li>
        </ul>

        <ul id="nav-mobile" class="sidenav">
          <li><div class="center user-view teal lighten-2">
            <span class="brand-logo"><b class="lime-text text-accent-1">t</b>ri<b class="lime-text text-accent-1">b</b>e</span>
            <br>
          </div></li>
          <li><a class="btn white accent-1 black-text" href="https://www.gofundme.com">DONATE <i class="material-icons right">launch</i></a></li>
          <li><a class="btn white accent-1 black-text" href="#gift-cards">Buy a Gift Card</a></li>
          <li><a class="btn white accent-1 black-text modal-trigger" href="#application-modal">Relief Application</a></li>
        </ul>
        <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      </div>
    </nav>
  </div>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <div class="center">
        <h1 class="header teal-text text-lighten-3">Help those in need. Donate to local businesses.</h1>
        <h5 class="header col s12 light">
          Covid-19 is wreaking havoc across the Tampa Bay community. Please, if you can, help.</h5>
        <div class="row">
          <div class="col s12 m6">
            <div class="icon-block">
              <h2 class="center teal-text text-lighten-3">
                <i class="material-icons">
                  attach_money
                </i>
              </h2>
              <h5 class="center teal-text text-darken-2">Donations</h5>
              <p class="light">
                I started a GoFundMe to raise money for small businesses local to the Tampa Bay Area. 
                All proceeds will go directly to businesses registered with the platform. To apply for 
                assistance, <a href="#">click here</a>.
              </p>
              <div>
                <a href="https://www.gofundme.com" class="btn-large waves-effect waves-light lime accent-1 black-text">DONATE<i class="material-icons right">launch</i></a>
              </div>
            </div>
          </div>        
          <div class="col s12 m6">
            <div class="icon-block">
              <h2 class="center teal-text text-lighten-3">
                <i class="material-icons">
                  card_giftcard
                </i>
              </h2>
              <h5 class="center teal-text text-darken-2">Gift Cards</h5>
              <p class="light">
                Consider giving and getting something in return! Follow the links below 
                to buy a gift card from your favorite company listed below.
              </p>
              <br>
              <div>
                <a href="#gift-cards" class="btn-large waves-effect waves-light lime accent-1 black-text">BUY A GIFT CARD</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br><br>

  <div class="container center">
    <br>
    <hr>
    <br>
    <h3 class="grey-text">Our Community's Incredible Companies</h3>
    <br>
    <div class="row" id="gift-cards">
      <div class="col s12 m4">
        <div class="card">
          <div class="card-image">
            <img src="static/images/spaddys.png">
            <span class="card-title"></span>
            <a href="https://www.spaddyscoffee.com" class="btn-floating btn-large halfway-fab waves-effect waves-light red"><i class="material-icons">payment</i></a>
          </div>
          <div class="card-content">
            <br>
            <p>Spaddy's Coffee Company is a locally owned coffee shop located in Tampa, Fl with a focus on coffee & community. We offer a variety of specialty coffee offerings, as well as tea, cookies, cuban bread and light bites. </p>
          </div>
        </div>
      </div>
      <div class="col s12 m4">
        <div class="card">
          <div class="card-image">
            <img src="static/images/urbanbungalow.jpeg">
            <span class="card-title"></span>
            <a href="https://www.urbanbungalowtampa.com" class="btn-floating btn-large halfway-fab waves-effect waves-light red"><i class="material-icons">payment</i></a>
          </div>
          <div class="card-content">
            <br>
            <br>
            <br>
            <p>Urban Bungalow is your one stop destination when it comes to all of your home essentials.  We hand select unique items from across the country. From furniture to gourmet provisions, lifestyle and home gifts, we have a rich collection to suit any taste.</p>
          </div>
        </div>
      </div>
      <div class="col s12 m4">
        <div class="card">
          <div class="card-image">
            <img src="static/images/whateverpops.png">
            <span class="card-title"></span>
            <a href="http://whateverpops.com/" class="btn-floating btn-large halfway-fab waves-effect waves-light red"><i class="material-icons">payment</i></a>
          </div>
          <div class="card-content">
            <br>
            <p>We serve handcrafted Ice Pops, house-made Gelato, Superfood Açaí Bowls, locally roasted Coffee, fresh-fruit Smoothies and Waffles-on-a-Stick. Yes, that’s right, Waffles-on-a-Stick.</p>
            <br>
          </div>
        </div>
      </div>
    </div>
    <!-- <form target="_blank" method="POST" action="dashboard.html" action="javascript:;" onsubmit="sendToDashboard()"> -->
    <!-- <form> -->
    <!-- <form id="formEntry" action="javascript:;" onsubmit="sendToDashboard(this)"> -->
      <!-- <div class="center">
        <button class="btn-large waves-effect waves-light lime accent-1 black-text" type="submit" name="action">Relief 
        </button>
      </div> -->
       <!-- Modal Trigger -->
      <a class="btn-large waves-effect waves-light lime accent-1 black-text modal-trigger" href="#application-modal">Apply for Relief</a>

      <!-- Modal Structure -->
      <div id="application-modal" class="modal modal-fixed-footer">
        <div class="modal-content">
          <div class="container center">
            <h4 class="grey-text">Relief Fund Application</h4>
            <div class="row">
              <form id="application-form" class="col s12">
                <div class="row">
                  <div class="input-field col s12">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="name" type="text" class="validate" required>
                    <label for="name">Name</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s6">
                    <i class="material-icons prefix">email</i>
                    <input id="email" type="email" class="validate" required="required">
                    <label for="email">Email</label>
                  </div>
                  <div class="input-field col s6">
                    <i class="material-icons prefix">phone_iphone</i>
                    <input id="phone" type="tel" class="validate" required>
                    <label for="phone">Phone</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field tooltipped col s12" data-position="bottom" data-tooltip="Funding requested to support your business (lower the better)">
                    <i class="material-icons prefix">attach_money</i>
                    <input id="goal" type="number" class="validate" required>
                    <label for="goal">Fundraising Goal</label>
                  </div>
                </div>
                <!-- <div class="row">
                  <div class="input-field col s12">
                    <i class="material-icons prefix">today</i>
                    <input type="text" class="datepicker" id="date">
                    <label for="date">Fundraising End Date</label>
                  </div>
                </div> -->
                <div class="row">
                  <div class="input-field tooltipped col s12" data-position="bottom" data-tooltip="A link to your business' website">
                    <i class="material-icons prefix">insert_link</i>
                    <input type="text" id="business_url" class="validate" required>
                    <label for="business_url">Company Website</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field tooltipped col s12" data-position="bottom" data-tooltip="A link to you sell gift cards">
                    <i class="material-icons prefix">card_giftcard</i>
                    <input type="text" id="gift_card_url">
                    <label for="gift_card_url">Gift Card URL</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field tooltipped col s12" data-position="bottom" data-tooltip="A brief description of you, your company, and your current situation">
                    <i class="material-icons prefix">library_books</i>
                    <textarea id="story" class="materialize-textarea validate" data-length="2000" required></textarea>
                    <label for="story">Your Story</label>
                    <!-- <span class="helper-text">A brief description of you, your company, and your current situation</span> -->
                  </div>
                </div>
                <!-- <div class="row">
                  <div class="input-field" >
                    <input type="submit" class=" waves-effect waves-green btn-flat" value="SUBMIT">
                  </div>
                </div> -->
              <!-- </form> -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="red white-text lighten-2 waves-effect waves-teal btn-flat">SUBMIT</button>
        </div>
      </form>
      </div>
    </div>

    <br><br>

  <!-- Footer -->
  <footer class="page-footer teal lighten-2">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Donate</h5>
          <p class="grey-text text-lighten-4">
            TODO
          </p>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Resources</h5>
          <ul>
            <li><a class="lime-text text-accent-1" href="https://www.fast.ai/2020/03/09/coronavirus/" target="_blank" rel="noopener noreferrer">
              - Covid-19, your community, and you — a data science perspective
            </a></li>
            <li><a class="lime-text text-accent-1" href="https://www.cdc.gov/coronavirus/2019-ncov/" target="_blank" rel="noopener noreferrer">
              - CDC Covid-19 Guide
            </a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Connect</h5>
          <ul class="footer-link">
            <li><a class="lime-text text-accent-1" href="#!"><i class="material-icons">email</i></a></li>
            <li><a class="lime-text text-accent-1" href="#!">GitHub</a></li> <!--Github icon-->
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      Inspired by <a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script>
    // document.addEventListener('DOMContentLoaded', function() {
    //   var elems = document.querySelectorAll('.datepicker');
    //   var instances = M.Datepicker.init(elems,{});
    //   var elems = document.querySelectorAll('.modal');
    //   var instances = M.Modal.init(elems);
    // });
    $(document).ready(function(){
      // $('.datepicker').datepicker();
      $('.sidenav').sidenav();
      $('.modal').modal();
      $('.tooltipped').tooltip();
    });
  </script>
  <script type="text/javascript">
    // document.getElementById("spaddys").addEventListener('click', donate);
    // function donate()
    // {
    //   const api_url = "http://127.0.0.1:4242/donate";
    //   var xhr = new XMLHttpRequest();
    //   xhr.onreadystatechange = function() {
    //     if (this.readyState == 4 && this.status == 200) {
    //       M.toast({html: "Thank you!"})
    //     } else {
    //       M.toast({html: this.status});
    //     }
    //   };
    //   xhr.open("POST", api_url, true);
    //   http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    //   xhr.send(JSON.stringify(data));
    // }
    window.addEventListener( "load", function () {
      function sendData(data) {
        const XHR = new XMLHttpRequest();

        // Define what happens on successful data submission
        XHR.addEventListener( "load", function(event) {
          alert( event.target.responseText );
        } );

        // Define what happens in case of error
        XHR.addEventListener( "error", function( event ) {
          alert( 'Oops! Something went wrong.' );
        } );

        // Set up our request
        XHR.open( "POST", "https://xjgwkkfzr7.execute-api.us-east-1.amazonaws.com/pre-dev/donate" );
        XHR.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        // The data sent is what the user provided in the form
        XHR.send( JSON.stringify( data ) );
      }
    
      // Access the form element...
      let form = document.getElementById( "application-form" );

      // ...and take over its submit event.
      form.addEventListener( "submit", function ( event ) {
        event.preventDefault();
        // TODO: Data validation (e.g. ensure phone numbers are phone numbers, emails are emails, data is present, etc.)
        const data = {
          "name": event.target.elements[0].value,
          "email": event.target.elements[1].value,
          "phone": event.target.elements[2].value,
          "goal": event.target.elements[3].value,
          // "date": event.target.elements[4].value,
          "business_url": event.target.elements[4].value,
          "gift_card_url": event.target.elements[5].value,
          "story": event.target.elements[6].value
        }
        // console.log(data);
        sendData( data );
      } );
    } );
  </script>
  </body>
</html>
